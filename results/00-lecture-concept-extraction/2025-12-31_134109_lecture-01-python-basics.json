{
  "usecase": {
    "name": "Concepts Extraction from Lecture Transcript",
    "folder": "sample-usecases/00-lecture-concept-extraction",
    "data_file": "sample-usecases\\00-lecture-concept-extraction\\data\\lecture-01-python-basics.txt",
    "ground_truth_file": "sample-usecases\\00-lecture-concept-extraction\\ground-truth\\lecture-01-concepts.csv"
  },
  "prompts": {
    "analysis": {
      "transformation_type": "Temporal segmentation and concept extraction from timestamped lecture transcripts",
      "key_fields": [
        "concept",
        "start_time",
        "end_time"
      ],
      "quality_indicators": [
        "All segments between 2-7 minutes duration (3-6 minutes ideal)",
        "Sequential numbering with descriptive concept names in XX_Title_Case_Format",
        "Gapless coverage (each end_time matches next start_time)",
        "Natural pedagogical boundaries between concepts",
        "Complete transcript coverage from start to finish",
        "Descriptive concept names (3-7 words) that accurately reflect content"
      ],
      "comparison_strategy": "Compare segment count, duration compliance, naming convention adherence, temporal coverage gaps, and boundary alignment between output and ground truth"
    },
    "task_prompt": "You are an expert educational content curator. Your task is to extract distinct teaching concepts from a lecture transcript and segment them into bite-sized video clips.\n\n**INPUT:** A lecture transcript with timestamps in [HH:MM:SS] format.\n\n**YOUR TASK:** Identify self-contained teaching concepts and output them as a CSV with three columns: concept, start_time, end_time.\n\n**REQUIREMENTS:**\n\n1. **Duration Constraints:**\n   - Each segment must be 2-7 minutes long\n   - Ideal length is 3-6 minutes\n   - Segments under 2 minutes or over 7 minutes are violations\n\n2. **Concept Naming:**\n   - Format: `XX_Concept_Name_In_Title_Case`\n   - Number sequentially starting from 01\n   - Use underscores, no spaces\n   - Be descriptive but concise (3-7 words)\n   - Accurately reflect the teaching content\n\n3. **Coverage:**\n   - Cover the ENTIRE lecture with NO GAPS\n   - Each segment's end_time must equal the next segment's start_time\n   - Start from the lecture beginning, end at the lecture conclusion\n   - Exclude breaks but don't create gaps (merge around them)\n\n4. **Boundaries:**\n   - Cut at natural transition points between concepts\n   - Each segment should be self-contained and make sense independently\n   - Respect pedagogical flow (don't split explanations mid-thought)\n\n5. **Edge Cases:**\n   - Q&A sections: merge with preceding concept or create separate segment if substantial\n   - Tangential stories: include with the relevant concept\n   - Mid-lecture breaks: exclude duration but maintain continuous timestamps\n   - Repeated references: keep with the current concept being taught\n\n**OUTPUT FORMAT:**\n```csv\nconcept,start_time,end_time\n01_Introduction_to_Topic_Name,00:00:00,00:04:32\n02_Core_Concept_Definition,00:04:32,00:08:15\n```\n\n**Time Format:** HH:MM:SS (e.g., 00:04:32)\n\nProvide ONLY the CSV output, no additional text or explanations.",
    "judge_prompt": "You are evaluating the quality of lecture concept extraction against a ground truth reference. Compare the candidate output to the ground truth CSV and score based on the criteria below.\n\n**INPUTS:**\n- Ground Truth CSV: The reference segmentation\n- Candidate Output CSV: The LLM's extraction to evaluate\n- Original Transcript: The source material\n\n**EVALUATION CRITERIA:**\n\n**1. DURATION COMPLIANCE (30 points)**\n- Check each segment duration (end_time - start_time)\n- CRITICAL VIOLATION: Segment under 2 minutes OR over 7 minutes (-5 points each)\n- MINOR: Segment outside ideal 3-6 minute range but within 2-7 minutes (-1 point each)\n- Calculate: Total segments compliant / Total segments \u00d7 30\n\n**2. COVERAGE COMPLETENESS (25 points)**\n- First segment must start at lecture beginning (00:00:00 or within 5 seconds)\n- Last segment must end at lecture conclusion (compare to ground truth end time \u00b110 seconds)\n- Check for GAPS: Any gap where segment[n].end_time \u2260 segment[n+1].start_time (-5 points per gap)\n- Check for OVERLAPS: segment[n].end_time > segment[n+1].start_time (-5 points per overlap)\n- Deduct points from 25 based on violations\n\n**3. CONCEPT NAMING QUALITY (20 points)**\n- Format compliance: XX_Title_Case_With_Underscores (-2 points per violation)\n- Sequential numbering: Must be 01, 02, 03... with no skips (-3 points per error)\n- Descriptiveness: Names should be 3-7 words and accurately reflect content (-2 points for vague/inaccurate names)\n- Compare semantic similarity to ground truth concept names (if highly divergent, -3 points)\n\n**4. SEGMENTATION ACCURACY (25 points)**\n- Compare segment count: Ground truth has 8 segments\n  - If candidate has 6-10 segments: Full points\n  - If candidate has 4-5 or 11-12 segments: -5 points (under/over-segmented)\n  - If candidate has <4 or >12 segments: -15 points (severely wrong granularity)\n- Boundary alignment: Compare candidate boundaries to ground truth (\u00b130 seconds tolerance is acceptable)\n  - Major misalignment (>2 minutes off): -3 points per boundary\n  - Minor misalignment (30sec-2min off): -1 point per boundary\n\n**SCORING CALCULATION:**\n1. Start with 100 points\n2. Apply all penalties from each category\n3. Ensure category scores don't go below 0\n4. Sum all category scores for final score (0-100)\n\n**OUTPUT FORMAT:**\nProvide a JSON evaluation:\n```json\n{\n  \"duration_compliance\": {\"score\": X, \"violations\": [\"list\"], \"details\": \"explanation\"},\n  \"coverage_completeness\": {\"score\": X, \"violations\": [\"list\"], \"details\": \"explanation\"},\n  \"concept_naming\": {\"score\": X, \"violations\": [\"list\"], \"details\": \"explanation\"},\n  \"segmentation_accuracy\": {\"score\": X, \"violations\": [\"list\"], \"details\": \"explanation\"},\n  \"total_score\": X,\n  \"quality_tier\": \"Excellent|Good|Acceptable|Poor\",\n  \"summary\": \"Brief overall assessment\"\n}\n```\n\n**QUALITY TIERS:**\n- Excellent (90-100): All segments 2-7 min, complete coverage, accurate names, natural boundaries\n- Good (75-89): 1-2 minor violations, mostly accurate, near-complete coverage\n- Acceptable (60-74): 3-5 violations, some issues but usable output\n- Poor (<60): 6+ violations OR major gaps OR severely wrong segmentation",
    "rubric": {
      "critical_requirements": [
        {
          "name": "duration_constraints",
          "description": "All segments must be between 2-7 minutes in duration",
          "derived_from": "Ground truth shows 8 segments all within acceptable range; use case explicitly states 2 min minimum, 7 min maximum",
          "penalty_per_violation": 5
        },
        {
          "name": "gapless_coverage",
          "description": "No gaps or overlaps between consecutive segments; each end_time must equal next start_time",
          "derived_from": "Ground truth shows perfect continuity: 00:02:42\u219200:02:42, 00:07:15\u219200:07:15, etc. Use case states 'gapless' as key requirement",
          "penalty_per_violation": 5
        },
        {
          "name": "complete_transcript_coverage",
          "description": "First segment starts at lecture beginning, last segment ends at lecture conclusion",
          "derived_from": "Ground truth starts at 00:00:00 and covers full lecture duration; use case requires 'full transcript coverage'",
          "penalty_per_violation": 10
        },
        {
          "name": "naming_convention",
          "description": "Format must be XX_Title_Case_With_Underscores, sequentially numbered from 01",
          "derived_from": "Ground truth demonstrates consistent format: 01_Introduction_and_Variables_Overview, 02_Data_Types_Numbers_and_Strings, etc.",
          "penalty_per_violation": 2
        }
      ],
      "compliance_checks": [
        {
          "check": "segment_too_short",
          "condition": "Any segment duration < 2 minutes",
          "severity": "CRITICAL",
          "penalty": 5
        },
        {
          "check": "segment_too_long",
          "condition": "Any segment duration > 7 minutes",
          "severity": "CRITICAL",
          "penalty": 5
        },
        {
          "check": "temporal_gap",
          "condition": "segment[n].end_time \u2260 segment[n+1].start_time (gap exists)",
          "severity": "CRITICAL",
          "penalty": 5
        },
        {
          "check": "temporal_overlap",
          "condition": "segment[n].end_time > segment[n+1].start_time",
          "severity": "CRITICAL",
          "penalty": 5
        },
        {
          "check": "missing_start_coverage",
          "condition": "First segment start_time > 00:00:05",
          "severity": "HIGH",
          "penalty": 10
        },
        {
          "check": "missing_end_coverage",
          "condition": "Last segment end_time more than 10 seconds before lecture conclusion",
          "severity": "HIGH",
          "penalty": 10
        },
        {
          "check": "incorrect_naming_format",
          "condition": "Concept name doesn't follow XX_Title_Case_Format",
          "severity": "MEDIUM",
          "penalty": 2
        },
        {
          "check": "non_sequential_numbering",
          "condition": "Numbering skips or doesn't start at 01",
          "severity": "MEDIUM",
          "penalty": 3
        },
        {
          "check": "vague_concept_name",
          "condition": "Concept name is not descriptive (too short, generic, or inaccurate)",
          "severity": "MEDIUM",
          "penalty": 2
        },
        {
          "check": "wrong_granularity",
          "condition": "Segment count differs significantly from expected range (ground truth: 8 segments, acceptable: 6-10)",
          "severity": "HIGH",
          "penalty": 5
        },
        {
          "check": "boundary_misalignment",
          "condition": "Segment boundaries differ from ground truth by >2 minutes",
          "severity": "MEDIUM",
          "penalty": 3
        },
        {
          "check": "invalid_csv_format",
          "condition": "Output is not valid CSV or missing required columns",
          "severity": "CRITICAL",
          "penalty": 50
        }
      ],
      "weights": {
        "accuracy": 40,
        "format": 20,
        "compliance": 40
      },
      "scoring_instructions": "Start with 100 points. Evaluate each compliance check and apply penalties. Accuracy (40 points) covers segmentation accuracy and boundary alignment. Format (20 points) covers CSV structure and naming conventions. Compliance (40 points) covers duration constraints and coverage completeness. Sum penalties within each category, ensuring no category goes below 0. Final score = 100 - total_penalties. Quality tier: Excellent (90-100), Good (75-89), Acceptable (60-74), Poor (<60)."
    }
  },
  "results": [
    {
      "model_name": "openai/gpt-4o",
      "task_name": "concepts_extraction_from_lecture_transcript",
      "output": "/* chunk 1 */\n```csv\nconcept,start_time,end_time\n01_Introduction_to_Python_Basics,00:00:00,00:02:42\n02_Variables_and_Assignment_Operator,00:02:42,00:05:15\n03_Data_Types_Integers_And_Floats,00:05:15,00:07:45\n04_Strings_And_Booleans,00:07:45,00:10:25\n05_Type_Conversion_And_Practice,00:10:25,00:12:32\n06_Arithmetic_And_Comparison_Operators,00:12:32,00:15:10\n07_Logical_Operators_And_If_Statements,00:15:10,00:18:08\n08_Elif_Else_And_Nested_Ifs,00:18:08,00:21:38\n09_For_And_While_Loops,00:21:38,00:24:38\n10_Loop_Control_Break_And_Continue,00:24:38,00:27:02\n```",
      "input_tokens": 4827,
      "output_tokens": 238,
      "total_tokens": 5065,
      "cost_usd": 0.0144,
      "billed_cost_usd": 0.0144475,
      "latency_ms": 3970.0052000116557,
      "timestamp": "2025-12-31 13:40:25.086042",
      "generation_id": "gen-1767210021-3FPX7eEY4afxFPjUjuaA",
      "provider": null,
      "status": "success",
      "error": null
    },
    {
      "model_name": "anthropic/claude-sonnet-4",
      "task_name": "concepts_extraction_from_lecture_transcript",
      "output": "/* chunk 1 */\n```csv\nconcept,start_time,end_time\n01_Introduction_And_Variables_Basics,00:00:00,00:02:42\n02_Python_Data_Types_Overview,00:02:42,00:07:45\n03_Operators_And_Type_Conversion,00:07:45,00:11:20\n04_Conditional_Statements_If_Elif_Else,00:11:20,00:15:10\n05_For_Loops_And_Iteration,00:15:10,00:17:08\n06_While_Loops_And_Loop_Control,00:17:08,00:21:55\n07_Common_Pitfalls_And_Summary,00:21:55,00:25:35\n08_Questions_And_Course_Wrap_Up,00:25:35,00:27:02\n```",
      "input_tokens": 5282,
      "output_tokens": 213,
      "total_tokens": 5495,
      "cost_usd": 0.019,
      "billed_cost_usd": 0.019041,
      "latency_ms": 4479.227299918421,
      "timestamp": "2025-12-31 13:40:25.582575",
      "generation_id": "gen-1767210021-cvGCcQzZeWCNCpFBeRXs",
      "provider": null,
      "status": "success",
      "error": null
    }
  ],
  "scores": [
    {
      "model_evaluated": "openai/gpt-4o",
      "accuracy_score": 65,
      "format_score": 95,
      "compliance_score": 45,
      "overall_score": 60,
      "violations": [
        "Segment 02 (00:02:42-00:05:15): Duration 2:33, acceptable but not ideal",
        "Segment 03 (00:05:15-00:07:45): Duration 2:30, acceptable but not ideal",
        "Segment 05 (00:10:25-00:12:32): Duration 2:07, CRITICAL - under 3 minutes (below ideal range)",
        "Segment 06 (00:12:32-00:15:10): Duration 2:38, acceptable but not ideal",
        "Segment 09 (00:21:38-00:24:38): Duration 3:00, within ideal range",
        "Over-segmentation: 10 segments vs ground truth 8 segments (25% more granular)",
        "Boundary misalignment at 00:02:42: Ground truth splits at same point but candidate creates extra segment",
        "Boundary misalignment at 00:07:15 vs 00:07:45: 30 second difference (minor)",
        "Boundary misalignment at 00:10:05 vs 00:10:25: 20 second difference (acceptable)",
        "Major boundary misalignment at 00:13:28 vs 00:15:10: 1:42 difference",
        "Major boundary misalignment at 00:17:08 vs 00:18:08: 1:00 difference",
        "Major boundary misalignment at 00:20:15 vs 00:21:38: 1:23 difference",
        "Concept naming divergence: Ground truth uses broader concepts, candidate splits into finer granularity"
      ],
      "reasoning": "DURATION COMPLIANCE (45/100): 5 of 10 segments fall outside the ideal 3-6 minute range. Segment 05 at 2:07 is critically short. Segments 02, 03, 05, and 06 are all under 3 minutes. Only segments 01, 04, 07, 08, 09, and 10 meet duration requirements. Penalty: -55 points. COVERAGE COMPLETENESS (25/25): Complete coverage from 00:00:00 to 00:27:02 with no gaps or overlaps. All end times match next start times perfectly. CONCEPT NAMING (19/20): Format compliance is excellent with proper XX_Title_Case_Format and sequential numbering 01-10. Minor deduction (-1) for slight semantic divergence from ground truth - candidate uses more granular concept splits. SEGMENTATION ACCURACY (16/25): Candidate has 10 segments vs ground truth 8 segments, indicating over-segmentation (-5 points). Multiple boundary misalignments: major misalignments at 00:13:28 vs 00:15:10 (1:42 off), 00:17:08 vs 00:18:08 (1:00 off), and 00:20:15 vs 00:21:38 (1:23 off) result in -9 points total. The candidate splits concepts more finely than ground truth, particularly in the data types and control flow sections. TOTAL: 45+25+19+16 = 105 raw points, normalized to compliance-weighted score of 60/100.",
      "timestamp": "2025-12-31 13:40:42.162354"
    },
    {
      "model_evaluated": "anthropic/claude-sonnet-4",
      "accuracy_score": 65,
      "format_score": 95,
      "compliance_score": 42,
      "overall_score": 59,
      "violations": [
        "CRITICAL: Segment 05 (05_For_Loops_And_Iteration) duration is 1m58s - under 2 minute minimum",
        "CRITICAL: Segment 08 (08_Questions_And_Course_Wrap_Up) duration is 1m27s - under 2 minute minimum",
        "Segment boundaries misaligned with ground truth by 30s-2m05s in multiple places",
        "Major boundary misalignment at segment 07 (2m05s off from ground truth)",
        "Content structure differs from ground truth in segments 06-08"
      ],
      "reasoning": "The candidate output has significant compliance issues with 2 out of 8 segments (25%) violating the critical 2-minute minimum duration requirement. Coverage is perfect with no gaps or overlaps. Format and naming are excellent with only minor semantic differences. However, segmentation accuracy suffers from boundary misalignments, particularly in the latter half of the lecture where the candidate appears to have segmented content differently (While Loops, Common Pitfalls vs Practical Example, Summary). Duration compliance: 20/30. Coverage: 25/25. Naming: 18/20. Segmentation: 16/25. Total: 79/100. However, with 25% of segments violating duration constraints, compliance_score should be lower: (6/8)*100 = 75% compliant segments, but with critical violations = 42/100. Overall weighted: 65*0.3 + 95*0.2 + 42*0.5 = 19.5 + 19 + 21 = 59.5, rounded to 59.",
      "timestamp": "2025-12-31 13:41:09.883502"
    }
  ],
  "statistics": {
    "total_cost": 0.03,
    "total_tokens": 10560,
    "total_input_tokens": 10109,
    "total_output_tokens": 451,
    "total_evaluations": 2,
    "avg_cost_per_eval": 0.015,
    "avg_tokens_per_eval": 5280,
    "cost_by_model": {
      "openai/gpt-4o": {
        "cost": 0.0144,
        "input_tokens": 4827,
        "output_tokens": 238,
        "evaluations": 1
      },
      "anthropic/claude-sonnet-4": {
        "cost": 0.019,
        "input_tokens": 5282,
        "output_tokens": 213,
        "evaluations": 1
      }
    }
  }
}